# ORB-SLAM-译


# ORB-SLAM：一种通用的精确的单目SLAM系统

<!--more-->

**摘要**：本文提出了ORB-SLAM，一种基于特征的单目SLAM系统，其可以实时操作在大小场景、室内室外环境。系统对复杂的剧烈运动具有鲁棒性，允许宽基线的闭环和重定位，且包含完整的自动初始化。基于最近几年的优秀算法之上，我们从头开始设计了一个新颖的系统，它对所有SLAM任务使用相同的特征：追踪、建图、重定位和闭环。合适的选择重建点和关键帧策略的存在使其具有很好的鲁棒性，并能够生成紧凑的可追踪的地图，并且只有当场景内容发生变化地图才改变，从而允许长时间操作。本文从最受欢迎的数据集中提供了27个序列的详尽评估。相对于其他最先进的单目SLAM方法，ORB-SLAM实现了前所未有的性能。为了社会的利益，我们将源代码公开。

**关键字**：持续建图，定位，单目视觉，识别，同时定位和制图（SLAM）。

<br/>

## I.引言

&emsp;&emsp;BA提供相机定位的精确估计以及稀疏几何重建<sup>[1]</sup><sup>[2]</sup>，以及并且提供了强烈的匹配网络和良好的初始猜测。一段长的时间，这种方法被认为不符合实时性的应用，如视觉VSLAM。VSLAM系统在构建环境的同时需要估计相机的轨迹。现在，我们为了不以过高的计算成本获得准确的结果，实时SLAM算法必须向BA提供以下信息：

- 在候选图像帧子集中（关键帧）匹配观测的场景特征（地图云点）。

- 由于关键帧数量的增长，需要做筛选避免冗余。

- 关键帧和云点健壮的网络配置可以产生精确的结果，换言之，分布良好的关键帧集合和有明显视差、大量回环匹配的观测云点。

- 关键帧和云点位置的初始估计，采用非线性优化的方法。

- 在构建局部地图的过程中，优化的关键是获得良好的稳定性。

- 本系统可以实时执行快速全局优化（比如位姿图）以实现闭环回路。


&emsp;&emsp;BA第一次实时应用是在Mouragon等人<sup>[3]</sup>提出的视觉里程计算法中，其次是在Klein和Murray的突破性工作PTAM<sup>[4]</sup>算法中。尽管受制于小场景的应用，PTAM算法对关键帧的选择，特征匹配，点的三角化，相机位姿估计，追踪失败后的重定位非常有效。然而，由于缺少闭环检测和对遮挡场景的处理，再加上其视图不变性差，在地图初始化时需要人工干预等多个因素，使得PTAM算法的应用收到了严重的限制。

&emsp;&emsp;在本文中，我们基于PTAM算法的主要框架，采用Gálvez-López和Tardós提出的place recognition（场景/位置识别）算法，Strasdat等人提出的scale-aware loop closing（具备尺度感知的闭环检测）算法以及文献<sup>[7]</sup><sup>[8]</sup>中的大尺度操作中Covisibility信息的使用，重新设计了一种新的单目SLAM系统ORB-SLAM，本文的贡献主要包括：

 - 对所有的任务采用相同的特征：追踪、地图构建、重定位和闭环检测。这使得我们的系统更有效率、简单可靠。采用的ORB特征[9]在没有GPU的情况下也有很好的实时性，且具有旋转不变性和光照不变性。
 - 算法支持在宽阔环境中实时操作。由于covisibility graph的使用，特征点的跟踪与构图主要集中在局部共视区域，而与全局地图的大小无关。
 - 使用Essential Graph来优化位姿实现回环检测。构建生成树，并由系统、闭环检测链接和covisibility graph的强边缘进行维护。
 - 算法的实时相机重定位具有明显的旋转不变特性和光照不变性。这就使得点跟踪丢失后可以恢复，增强了地图的重用性。
 - 一种新的基于模型选择的自动鲁棒初始化过程，允许创建平面和非平面场景的初始地图。
 - 提出了一种合适的方法来选择地图点云和关键帧，通过严格删选关键帧和地图点，剔除冗余信息，使得特征点的跟踪具备了更好的稳定性，从而增强算法的可持续操作性。

<br/>

## II.相关工作

### A.位置识别

&emsp;&emsp;Williams等人在综述<sup>[13]</sup>中比较了几种基于景象的位置识别方法，即图像到图像的匹配，这种方法在大环境下比地图到地图或图像到地图的方法更准确。在景象匹配方法中，bags of words（词袋）<sup>[14]</sup>的使用以其效率很高而脱颖而出，比如概率方法FAB-MAP<sup>[15]</sup>算法。DBoW2方法[5]则首次使用了BRIEF描述子<sup>[16]</sup>生成的二进制词袋连同非常高效的FAST特征检测算法<sup>[17]</sup>，与SURF和SIFT相比，FAST算法的运时间减小了至少一个数量级。然而，尽管系统运行效率高、鲁棒性好，采用BRIEF描述子不具有旋转不变性和尺度不变性，系统只能运行在同一平面内（否则会造成尺度变化） ，闭环检测也只能从相似的视角中进行。在我们之前的工作<sup>[11]</sup>中，我们提出了一个使用ORB特征检测子<sup>[9]</sup>的DBoW2位置识别器。ORB特征是具有旋转不变和尺度不变特性的二进制特征，因此，用它生成的快速识别器具有较好的视角不变性。我们在4组不同的数据集上演示了位置识别功能，从10K图像数据库中提取一个候选闭合回路的运算时间少于39毫秒。在本文的工作中，我们提出了一种改进版本的位置识别方法，采用covisibility信息，在检索数据库时返回几个假设情况而不是最好的匹配。

### B.地图初始化

&emsp;&emsp;单目SLAM系统需要设计专门的策略来生成初始化地图，因为单幅图像不具备深度信息。解决这个问题的一种方法是一开始跟踪一个已知结构的对象，正如文献<sup>[20]</sup>。另一个方法是用一个具有高不确定度的逆深度参数<sup>[21]</sup>来初始化点的深度信息，理想情况下，该参数会在后期逐渐收敛到真值。最近Engel提出的半稠密方法<sup>[10]</sup>中就采用类似的方法将像素的深度信息初始化为一个随机数值。

&emsp;&emsp;如果是从两个视角来初始化特征，就可以采用以下方法：一种是假设局部场景在同一平面内<sup>[4]</sup>，<sup>[22]</sup>然后利用Faugeras等人论文<sup>[23]</sup>中的单应性来重构摄像头相对位姿。另一种是将场景建模为通用情况（不一定为平面），通过Nister提出的五点算法<sup>[26]</sup>来计算本征矩阵<sup>[24]</sup><sup>[25]</sup>，但该方法存在多解的问题。这两种摄像头位姿重构方法在低视差下都没有很好的约束，如果平面场景内的所有点都靠近摄像机的中心，则结果会出现双重歧义<sup>[27]</sup>。另一方面，非平面场景可以通过线性8点算法<sup>[2]</sup>来计算基础矩阵，相机的相对位姿就可以无歧义的重构出来。

&emsp;&emsp;针对这一问题，我们在本文的第四部分提出了一个新的基于模型选择的自动初始化方法，即对平面场景算法选择单应性矩阵，而对于非平面场景，算法选择基础矩阵。模型选择的综述方法参见Torr等人的论文<sup>[28]</sup>。基于类似的理论，我们设计了一种启发式初始化算法，算法考虑到在接近退化情况（比如：平面，近平面，或是低视差）下选择基础矩阵进行位姿估计可能存在的问题，则选择单应性计算。在平面的情况下，为了保险起见，如果最终存在双重歧义，则算法避免进行初始化，因为可能会因为错误选择而导致算法崩溃。因此，我们会延迟初始化过程，直到所选的模型在明显的视差下产生唯一的解。

### C.单目SLAM

&emsp;&emsp;单目SLAM最初采用滤波框架<sup>[20]</sup><sup>[21]</sup><sup>[29]</sup><sup>[30]</sup>来建模。在该类方法中，每一帧都通过滤波器联合估计地图特征位置和相机位姿。这样做带来的问题是在处理连续帧图像上对计算资源的浪费和线性误差的累积。而另外一种SLAM框架是基于关键帧的<sup>[3]</sup><sup>[4]</sup>，即采用少数筛选过的图像（关键帧）来构建地图，因为构图不再与帧率相关联，因此基于关键帧的SLAM方法不但节省了计算资源，还可以进行高精度的BA优化。Strasdar等人在论文<sup>[31]</sup>中证明了基于关键帧的单目SLAM方法比滤波器方法在相同的运算代价上定位结果更精确。

&emsp;&emsp;基于关键帧的SLAM系统最具代表性可能是由Klein和Murray等人提出的PTAM算法[4]。它第一次将相机追踪和地图构建拆分成两个并行的线程运行，并成功用于小环境的实时增强现实中。后来文献[32]引入边缘特征对PTAM算法进行了改进，在跟踪过程中增加了旋转估计步骤，实现了更好的重定位效果。由于PTAM中的地图云点通过图像区块与FAST角点匹配，因此仅适合于特征跟踪并不适合用于后期的位置识别。而实际上，PTAM算法并没有进行大闭环检测，其重定位也仅是基于关键帧低分辨率缩略图的相关性进行的，因此视角不变性较差。


